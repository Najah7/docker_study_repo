# Docker Networks 

## Brige
プライベートバーチャルネットワークのこと。<br>
各コンテナはBrigeと接続されている。<br>


## Docekr Networksのデフォルト
- 各バーチャルネットワークはNAT firewallでホストIPと接続されている。
- 同じバーチャルネットワークに接続してあるすべてのコンテナは-pオプションなしでそれぞれ接続できる。


## ベストプラクティス
- 各アプリごとにバーチャルネットワークを作成する。（フロントとバックエンドを同じネットワークに）

## Dockerネットワークの特徴
### - 起動時は-pオプションで指定（CLIの場合）(ホストのポート:コンテナのポート)
### - デフォルトでも多くの場合、うまく動作するが、オプションなどで簡単にカスタムできる（battery included but removableの考え方）
### - コンテナには、1つ以上のバーチャルネットワークを接続できる
### - 「--net(or --network)=host」でホストのIPを使うことでバーチャルネットワークの設定しないで起動も可能。
### - 違うDocker network driversを使うことも可能。

## デフォルトのセキュリティ
- 最初はすべてブロックされている。
- Dockerを使って開くように設定したら、ポートを開く
- コンテナとの接続はbrigeを経由して接続される。
※注意点：一つのポートにつき１つのコンテナのルティングしかできない。つまり、アプリの代表の一つのコンテナを接続して、残りのやつはバーチャルネットワーク経由（指定なし）で接続する
- ポートは-pで指定するべき（デフォルトのままよりセキュリティ的に良いから。）

## Docker Networks DNS
- 「--link」コマンドを使って、DNSをブリッジに適用する。
- デフォルトでは、コンテナの名前でDNSが設定されていない。

※DNSの利点：IPを使ってコンテナ同士の通信をする必要がない点
