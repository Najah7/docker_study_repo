# 背景（ボリュームについてしる上で大事な）
コンテナはImmutable Infrastructure（不変なインフラ）の考え方に基づいている。<br>
しかし、それだと、データベースなどで問題が、、、<br>
そこで、Dockerは persistent data（データの永続化）の機能を提供している<br>

NOTE:これは関心の分離の考え方に基づいている

# データの永続化の構成要素
- Volume
- Bind Mount

# ボリュームとは
コンテナのUFSの外にデータファイルを作成するやり方。DockerコンテナとホストOSの間でデータを永続化するための機能。<br>
ボリュームの配置場所は基本的にLinuxVM内につくられる。

# マウント
- ホストOSのファイルやディレクトリをコンテナ内のファイルシステムに接続すること（ファイルシステムのリンク機能で実現）

# ボリュームがない場合
コンテナを削除すると、コンテナ内のデータも削除されてしまう。（コンテナはデフォルトでは一時的なファイルシステムを使っているから）

# ボリュームの種類
|種類|説明|
|:--|:--|
|ホストマウント型ボリューム|ホストマシンのディレクトリをマウントする|
|データボリューム型ボリューム|Dockerが管理するディレクトリをマウントする|
|プラグイン型ボリューム|外部のプラグインを使ってボリュームを作成する|

## --mount vs. --volume
- フレキシビリティの違い: --mountオプションは、ファイルシステム以外にも、tmpfsなどのさまざまなデータのマウントに対応していますが、--volumeオプションはファイルシステムのマウントのみをサポートしています。
- マウントの指定方法の違い: --mountオプションでは、マウントするファイルシステムのパスを指定するために、sourceとtargetの2つのパラメータを使用します。一方、--volumeオプションでは、ホストOS上のパスとコンテナ内のパスの2つのパラメータを使用して、マウントするボリュームを指定します。
- セキュリティの違い: --mountオプションは、SELinuxやAppArmorなどのセキュリティ機能と統合されており、より細かなアクセス制御が可能です。一方、--volumeオプションでは、セキュリティ設定が適用されません。
- マウントの管理方法の違い: --mountオプションは、docker volumeコマンドを使用して作成したボリュームにも対応しており、ボリュームの管理が簡単になります。一方、--volumeオプションでは、ボリュームを作成するための別のコマンドが必要です。

総合的に、--mountオプションは、--volumeオプションよりも柔軟性があり、セキュリティ管理が容易である一方、--volumeオプションはシンプルであり、ファイルシステムのマウントに特化しています


-----
NOTE:マウントしたもの（コピーしたもの）は、ホストを変更したらすぐに反映される。（理由は、リンク機能を使っており、ポインタとして、メモリの位置を指しているので、ホスト側のファイルでメモリの値を変えたら、それを参照するコンテナ側も変わる。）（コンテナ起動中に変更してみて確認するハンズオンがあった。）